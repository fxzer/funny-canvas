var M=Object.defineProperty;var R=(n,i,t)=>i in n?M(n,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[i]=t;var s=(n,i,t)=>(R(n,typeof i!="symbol"?i+"":i,t),t);import{u as b}from"./useCanvas-b9fb9ced.js";import{d as $,a as k,c as P}from"./index-001d42e8.js";const D=$({__name:"index",setup(n){const{canvasRef:i,context:t,width:v,height:u}=b({init:x,animate:m}),f=[],c=[];let r=60,o=0;class d{constructor(e,l){s(this,"x");s(this,"y");s(this,"vx");s(this,"vy");s(this,"g");s(this,"ty");s(this,"opt");s(this,"fall");s(this,"color");this.x=e,this.y=l,this.vx=1,this.vy=Math.random()*3+5,this.g=this.vy,this.ty=.1,this.opt=0,this.fall=!1,this.color=`hsla(${o*30},80%,50%,`}update(){if(this.fall){this.y>=u.value&&(this.g*=.8,this.vy=-this.g,this.vx=Math.random()>.5?Math.random()*2:-Math.random()*2);const e=.01*this.vy;this.y+=this.vy,this.x+=this.vx,this.vy+=this.ty-e}this.opt+=.01}draw(){t.value&&(t.value.beginPath(),t.value.arc(this.x,this.y,5,0,Math.PI*2,!1),t.value.fillStyle=`${this.color+this.opt})`,t.value.fill())}}function p(a){for(const e in c[a]){const l=c[a][e];f.push(new d(l[0],l[1]))}}function x(){if(t.value)for(let a=0;a<=10;a++){t.value.font="40px Arial";const e=t.value.measureText(`${a}`).width|0;t.value.fillText(`${a}`,0,40);const l=t.value.getImageData(0,0,e,41).data,g=l.length,y=[];for(let h=0;h<g/4;h++)if(l[h*4+3]!==0){const _=h%e|0,w=h/e|0;y.push([_*20+(v.value-e*20)/2,w*20+(u.value-40*20)/2-200])}c.push(y),t.value.clearRect(0,0,40,41)}}function m(){t.value&&(t.value.fillStyle="rgba(0,0,0,0.2)",t.value.fillRect(0,0,v.value,u.value),r++,f.forEach((a,e)=>{a.update(),a.draw(),Math.abs(a.g)<2&&f.splice(e,1),r===60&&(a.fall=!0)}),r===120&&(p(10-o),r=0,o++,o=o%c.length))}return(a,e)=>(k(),P("canvas",{ref_key:"canvasRef",ref:i},null,512))}});export{D as default};

var S=Object.defineProperty;var $=(l,o,e)=>o in l?S(l,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[o]=e;var h=(l,o,e)=>($(l,typeof o!="symbol"?o+"":o,e),e);import{u as M}from"./useCanvas-b9fb9ced.js";import{d as P,b as q,p as B,a as C,c as D}from"./index-001d42e8.js";const E="/funny-canvas/assets/ironman-c5734587.jpg",A=P({__name:"index",setup(l){const{canvasRef:o,context:e,width:u,height:v}=M({animate:x}),g=q();let d=[];const t=B({img:new Image,x:0,y:0,width:600,height:600,data:[]});class m{constructor(a,i,n){h(this,"x");h(this,"y");h(this,"vy");h(this,"vx");h(this,"color");this.x=a,this.y=i,this.vx=a,this.vy=i,this.color=n}update(){const a=g.x.value-this.x,i=g.y.value-this.y,n=a*a+i*i;if(n<150*150){const r=Math.sqrt(n);this.x-=a/10*(1-r/150),this.y-=i/10*(1-r/150)}else this.x+=(this.vx-this.x)/20,this.y+=(this.vy-this.y)/20}draw(){var a,i,n;(a=e.value)==null||a.beginPath(),(i=e.value)==null||i.arc(this.x,this.y,2,0,Math.PI*2),e.value.fillStyle=this.color,(n=e.value)==null||n.fill()}}function y(){var s;e.value.strokeStyle="white",e.value.lineWidth=5,(s=e.value)==null||s.strokeRect(t.x,t.y,t.width,t.height)}function f(){t.img=new Image,t.img.src=E,t.img.onload=()=>{var i,n,r;y(),(i=e.value)==null||i.drawImage(t.img,t.x,t.y,t.width,t.height);const{data:s=[]}=(n=e.value)==null?void 0:n.getImageData(t.x,t.y,t.width,t.height);(r=e.value)==null||r.clearRect(0,0,u.value,v.value),t.data=s,d=[];const a=16;for(let c=0;c<s.length/4;c+=4*a){const w=s[c*4],p=s[c*4+1],_=s[c*4+2],I=s[c*4+3],R=`rgba(${w},${p},${_},${I})`,b=c%t.width+(u.value-t.width)/2,k=c/t.height+(v.value-t.height)/2;d.push(new m(b,k,R))}}}function x(){var s;e.value.fillStyle="rgba(0,0,0,0.1)",(s=e.value)==null||s.fillRect(0,0,u.value,v.value),d.forEach(a=>{a.draw(),a.update()})}return f(),(s,a)=>(C(),D("canvas",{ref_key:"canvasRef",ref:o},null,512))}});export{A as default};
